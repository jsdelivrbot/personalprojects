<! doctype>
<html>
	<head>
		<title> Testing Area</title>
		<script src="https://d3js.org/d3.v4.min.js"></script>
	</head>

	<script>
		var filename = "testdata.csv";

		function createSoccerViz(){
			d3.csv(filename, function(data){overallTeamViz(data)});
		}
		function overallTeamViz(incomingData){
			//console.log("in overallTeamViz");
			d3.select("svg")
				.append("g")
				.attr("id", "teamG")
				.attr("transform", "translate(50,30)")
				.selectAll("g")
				.data(incomingData)
				.enter()
				.append("g")
				.attr("class", "overallG")
				.attr("transform", (data, i) => "translate(" + (i * 50) + ", 0)");
			d3.selectAll("g.overallG")
				.append("circle")
				.attr("r",20);
			d3.selectAll("g.overallG")
				.append("text")
				.attr("y",35)
				.text(d => d.team);

			const dataKeys = Object.keys(incomingData[0])
				.filter(d => d !== "team" && d !== "region");
			d3.select("#controls").selectAll("button.teams")
				.data(dataKeys)
				.enter()
				.append("button")
				.on("click", buttonClick)
				.html(d => d);
		function buttonClick(datapoint) {
			var maxValue = d3.max(incomingData, d => parseFloat(d[datapoint]));
			var radiusScale = d3.scaleLinear()
								.domain([ 0, maxValue ]).range([ 2, 20 ]);
			d3.selectAll("g.overallG").select("circle")
				   .attr("r", d => radiusScale(d[datapoint]));
		}
		}
	</script>

	<body onload="createSoccerViz()">
		<div id="viz">
		<svg style="width:500px;height:500px;border:1px lightgray solid;" />
		</div>
		<div id="controls" />
	</body>



	<style>
		text {
			font-size: 10px;
			  text-anchor: middle;
			  fill: #4f442b;
		}
		g > text.active {
			font-size: 30px;
		}
		circle {
			fill: #75739F;
			stroke: black;
			stroke-width: 1px;
		}
		circle.active {
			fill: #FE9922;
		}
		circle.inactive {
			fill: #C4B9AC;
		}
	</style>

	<!--<body>
		<svg style="width:500px;height:500px;border:1px lightgray solid;" />

		</body>

		<script>

		var data = [
		{ x: 0, y: 10, },
		{ x: 1, y: 15, },
		{ x: 2, y: 35, },
		{ x: 3, y: 20, },
		];

	var margin = {top: 20, right: 20, bottom: 30, left: 50},
		width = 575 - margin.left - margin.right,
		height = 350 - margin.top - margin.bottom;

	var x = d3.scale.linear()
		.domain([0, d3.max(data, function(d) { return d.x; })])
		.range([0, width]);

	var y = d3.scale.linear()
		.domain([0, d3.max(data, function(d) { return d.y; })])
		.range([height, 0]);

	var xAxis = d3.svg.axis()
		.scale(x)
		.orient("bottom");

	var yAxis = d3.svg.axis()
		.scale(y)
		.orient("left");

	var area = d3.svg.area()
		.x(function(d) { return x(d.x); })
		.y0(height)
		.y1(function(d) { return y(d.y); });

	var svg = d3.select("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
	  .append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

	svg.append("path")
		.datum(data)
		.attr("class", "area")
		.attr("d", area);

	svg.append("g")
		.attr("class", "x axis")
		.attr("transform", "translate(0," + height + ")")
		.call(xAxis);

	svg.append("g")
		.attr("class", "y axis")
		.call(yAxis);

		</script> -->
</html>
